<div class="content">
  <h1>If you miss Jaro, click the first button</h1>
  <!-- Remove the server-side rendering of @joke and initialize empty -->
  <p id="jokeDisplay"></p>
  <button class="button joke-button">Tell me a joke</button>
  <button class="button tired-button">I am tired of this</button>
</div>

<script defer type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('button.button');
    buttons.forEach(button => {
      button.addEventListener('click', function(event) {
        event.preventDefault();
        const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
        fetch(`/jokes/show?_=${new Date().getTime()}`, {
          method: 'GET',
          headers: {
            'Accept': 'application/json',
            'Cache-Control': 'no-cache',
            'X-CSRF-Token': csrfToken
          }
        })
        .then(response => response.json())
        .then(data => {
          document.querySelector('#jokeDisplay').textContent = data.joke || 'No joke found!';
        })
        .catch(error => console.error('Error fetching joke:', error));
      });
    });
  });
</script>
